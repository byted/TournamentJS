<!DOCTYPE html> <html> <head> <meta name="generator" content="HTML Tidy, see www.w3.org" /> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <title>TournamentJS</title> <style>body{ background-color:#594F4F;color:#fff;font-family:"Trebuchet MS", Helvetica, sans-serif;}h1{ text-align:center;}a{ color:#000;margin:0.5em;padding:.3em;text-decoration:none;display:inline-block;border-radius:0px;box-shadow:1px 1px 1px 1px #333;}a:link, a:visited{ background-color:#8B9BA5;}a:hover{ background-color:#6E818C;}div.textlink{ color:#8B9BA5;font-weight:bolder;cursor:pointer;text-decoration:underline;}fieldset{ padding:1em;border:none;background-color:#666550;box-shadow:2px 2px 5px 3px #333;}.input{ background:white;border:1px solid #CCC;color:#333;outline:none;height:25px;width:275px;padding:0 5px;}.divcontentcenter{ text-align:right;}#navi{ float:left;}#navi > a{ color:#fff;display:block;background-color:#666550;margin-top:0;text-align:center;}#navi > a:hover{ background-color:#6E818C;}#notification{ background-color:#8B9BA5;color:#000;text-align:center;border-radius:10px;padding:10px;position:fixed;z-index:99;top:1em;right:1em;width:20%;max-height:15em;box-shadow:7px 7px 3px #555;}#menu > label{ margin-left:1em;margin-bottom:.5em;border-left:2px solid #fff;padding-left:1em;}.teamrow{ margin:.5em;}.teamrow > a{ margin:0;}table{ border-collapse:collapse;width:100%;color:#000;}thead{ background-color:#6E818C;color:#fff;}tbody > tr:hover{ background-color:#8B9BA5 !important;webkit-transition:background-color .8s, -webkit-transform .3s;moz-transition:background-color .8s, -moz-transform .3s;}tbody > tr:nth-child(odd){ background-color:#ddd;}tbody > tr:nth-child(even){ background-color:#fff;}td, th{ min-width:2em;padding:0.3em;text-align:center;}.tabpunkte{ font-weight:bold;border-left:1px solid #8B9BA5;border-right:1px solid #8B9BA5;}.tabplatz{ min-width:1em;text-align:center;width:1em;}.tabteamname{ padding-left:1em;text-align:left;width:65%;}#torschuetzen{ float:left;}#fairplaytab, #torschuetzen{ margin-top:1em;margin-right:.5em;width:30%;}div.matchGroup{ width:45%;margin-right:5%;margin-bottom:1em;float:left;}.begegnungen{ color:#fff;background-color:#6E818C;padding:.2em;box-shadow:1px 1px 1px 1px #333;text-align:center;}.begegnungen:hover{ background-color:#8B9BA5;}.begegnungen > span{ display:inline-block;width:30%;padding-left:.3em;}.begegnungen > span:first-of-type{ padding-right:.3em;text-align:right;}.begegnungen > span:last-of-type{ padding-right:.3em;text-align:left;}.toreinputright, .toreinputleft{ background-color:#fff;border:1px solid #555;width:1.6em !important;padding-right:0.3em;}.toreinputleft{ text-align:right;}.trenner{ width:1em ! important;padding:0em ! important;text-align:center;font-weight:bold;}select{ background-color:#fff;color:#000;border:1px solid #606000;height:1.8em;margin-right:1em;}.standing{ display:inline-block;width:2.5em;text-align:center;font-weight:bold;}</style> <script type="text/JavaScript">function setOpac(a,b){a.style.opacity=b/100}function blendIn(a,b){b===undefined&&(b=2);var c=1,d=setInterval(function(){c==100&&clearInterval(d),setOpac(a,c),c+=b,c>100&&(c=100)},10)}function blendOut(a,b){b===undefined&&(b=2);var c=100,d=setInterval(function(){c===0&&(clearInterval(d),showHide(a)),setOpac(a,c),c-=b,c<0&&(c=0)},10)}function showHide(a){a.style.display=="none"?a.style.display="block":a.style.display="none"}function clrInput(a,b){a.value==b&&(a.value="")}function del(a){a=a.parentNode,a.parentNode.removeChild(a)}function toggleLists(){var a=document.getElementById("input-show-fairplay"),b=document.getElementById("input-show-scorers");a.checked?(document.getElementById("navfairplay").style.display="inline",document.getElementById("fairplaytab").style.display="table"):(document.getElementById("navfairplay").style.display="none",document.getElementById("fairplaytab").style.display="none"),b.checked?(document.getElementById("navtore").style.display="inline",document.getElementById("torschuetzen").style.display="table"):(document.getElementById("navtore").style.display="none",document.getElementById("torschuetzen").style.display="none")}function startTournament(){var a=document.getElementsByName("ateamloeschen"),b=a.length;for(var c=0;c<b;c++)a[c].style.display="none";document.getElementById("addteam").parentNode.removeChild(document.getElementById("addteam")),document.getElementById("losbutton").parentNode.removeChild(document.getElementById("losbutton")),createGemaplan(),initTable(),showHide(document.getElementById("navi")),showHide(document.getElementById("loadlink")),document.getElementById("savebutton").style.display="inline-block",navigateTo("fsspielplan")}function addTeam(){var a=document.getElementById("teamliste"),b=document.createElement("div");b.className="teamrow";var c=document.createElement("input");c.id="team"+teamNbr++,c.className="input teams",c.name="team",c.placeholder="Name",b.appendChild(c);var d=document.createElement("a");d.href="#",d.innerHTML="[-]",d.title="Team löschen",d.id="ateamloeschen",d.name="ateamloeschen",d.setAttribute("onclick","del(this)"),b.appendChild(d),a.insertBefore(b,a.firstChild)}function addGoalScorer(){var a=document.getElementById("torschuetzenliste"),b=document.createElement("div");b.className="scorerrow",b.id="scorerrow"+scorerNbr;var c=document.createElement("select");c.size="1",c.name="torteams",c.setAttribute("onchange","this.disabled='disabled';"),c.setAttribute("ondblclick","this.removeAttribute('disabled');"),b.appendChild(c);var d=getNmbrOfTeams();for(var e=0;e<d;e++){var f=document.createElement("option");f.innerHTML="team"+e,f.innerHTML=getTeamNameById(e),b.lastChild.appendChild(f)}var g=document.createElement("input");g.id="scorer"+scorerNbr,g.className="input scorers",g.name="scorer",g.placeholder="Scorer ",g.setAttribute("ondblclick","this.nextSibling.removeAttribute('disabled');"),b.appendChild(g);var h=document.createElement("span");h.contentEditable="true",h.id="goalsscorer"+scorerNbr,h.className="standing",h.name="goals",h.innerHTML="0",h.size="2",h.setAttribute("disabled","disabled"),b.appendChild(h);var i=document.createElement("a");i.href="#",i.innerHTML="[+1]",i.title="Add goal",i.id="atorplus"+scorerNbr,i.name="atorplus",i.setAttribute("onclick","change(this,event);"),b.appendChild(i),scorerNbr++,a.insertBefore(b,a.firstChild)}function addFairPlay(){var a=document.getElementById("fairplayliste"),b=document.createElement("div");b.className="fairplayrow";var c=document.createElement("select");c.size="1",c.name="fairplayteams",c.setAttribute("onchange","this.disabled='disabled';"),b.appendChild(c);var d=getNmbrOfTeams();for(var e=0;e<d;e++){var f=document.createElement("option");f.innerHTML="team"+e,f.innerHTML=getTeamNameById(e),b.lastChild.appendChild(f)}var g=document.createElement("input");g.id="spieler"+fairPlayNbr,g.className="input fairplay",g.name="spieler",g.placeholder="Player name",g.setAttribute("ondblclick","this.nextSibling.removeAttribute('disabled');"),b.appendChild(g);var h=document.createElement("span");h.contentEditable="true",h.id="gelb"+fairPlayNbr,h.className="gelb standing",h.name="gelb",h.innerHTML="0",h.size="2",h.setAttribute("disabled","disabled"),b.appendChild(h);var i=document.createElement("a");i.href="#",i.innerHTML="[Gelb]",i.title="Gelbe Karte",i.id="agelb",i.name="agelb",i.setAttribute("onclick","change(this,event);checkBan(this,'gelb')"),b.appendChild(i);var j=document.createElement("span");j.contentEditable="true",j.id="gelbrot"+fairPlayNbr,j.className="gelbrot standing",j.name="gelbrot",j.innerHTML="0",j.size="2",j.setAttribute("disabled","disabled"),b.appendChild(j);var k=document.createElement("a");k.href="#",k.innerHTML="[Gelb-Rot]",k.title="Gelb-Rot",k.id="agelbrot",k.name="agelbrot",k.setAttribute("onclick","if(this.previousSibling.previousSibling.previousSibling.innerHTML >0) {change(this,event);changeYellow(this,event);checkBan(this,'gelbrot')};"),b.appendChild(k);var l=document.createElement("span");l.contentEditable="true",l.id="rot"+fairPlayNbr,l.className="rot standing",l.name="rot",l.innerHTML="0",l.size="2",l.setAttribute("disabled","disabled"),b.appendChild(l);var m=document.createElement("a");m.href="#",m.innerHTML="[Rot]",m.title="Rote Karte",m.id="arot",m.name="arot",m.setAttribute("onclick","change(this,event);checkBan(this,'rot')"),b.appendChild(m);var n=document.createElement("span");n.id="sperre"+fairPlayNbr,n.className="sperre",n.innerHTML="0",n.style.display="none",b.appendChild(n),fairPlayNbr++,a.insertBefore(b,a.firstChild)}function change(a,b){var c=parseInt(a.previousSibling.innerHTML);a.previousSibling.innerHTML=++c}function changeYellow(a,b){var c=parseInt(a.previousSibling.previousSibling.previousSibling.innerHTML);a.previousSibling.previousSibling.previousSibling.innerHTML=b.metaKey?c+1:c-1}function notification(a){var b=document.getElementById("notification");b.innerHTML=a,showHide(b),blendIn(b,10),setTimeout(function(){blendOut(b,.75)},2e3)}function createGemaplan(){var a=document.getElementById("spielplan"),b=document.getElementById("inputrrunde").checked;b=b?2:1;var c=0,d=getNmbrOfTeams(),e=new Array(d);for(var f=0;f<d;f++)e[f]=f;var g=d%2===0?!0:!1;d=g?d-1:d;var h=(d+1)/2;for(var i=0;i<d*b;i++){var j=e[d-1];for(var k=d-1;k>0;k--)e[k]=e[k-1];e[0]=j;var l=document.createElement("div");l.className="matchGroup",l.appendChild(drawGameplanLbl("Spieltag "+ ++c)),g&&l.appendChild(drawMatch(e[d],e[0]));for(var m=1;m<h;m++){var n=e[h-(m-1)-1],o=e[h+m-1];l.appendChild(drawMatch(n,o))}a.appendChild(l)}}function drawMatch(a,b){var c=document.createElement("div");c.id="begegnung"+matchNbr++,c.className="begegnungen";var d=document.createElement("span");d.className="nameteam"+a,d.innerHTML=getTeamNameById(a),c.appendChild(d);var e=document.createElement("input");e.contentEditable="true",e.className="toreteam"+a+" toreinputleft",e.size="2",c.appendChild(e);var f=document.createElement("span");f.className="trenner",f.innerHTML=":",c.appendChild(f);var g=document.createElement("input");g.contentEditable="true",g.className="toreteam"+b+" toreinputright",g.size="2",c.appendChild(g);var h=document.createElement("span");return h.className="nameteam"+b,h.innerHTML=getTeamNameById(b),c.appendChild(h),c}function drawGameplanLbl(a){var b=document.createElement("div");return b.appendChild(document.createTextNode("")),b.appendChild(document.createTextNode(a)),b.style.cursor="pointer",b.id="lbl"+a,b.className="lbl",b}function getTeamNameById(a){return document.getElementById("team"+a).value}function getScorerNameById(a){return document.getElementById("scorer"+a).value}function getScorerTeamById(a){return document.getElementById("scorer"+a).previousSibling.value}function getFairPlayNameById(a){return document.getElementById("spieler"+a).value}function getNmbrOfTeams(){return document.getElementById("teamliste").childNodes.length}function getNmbrOfScorers(){return document.getElementById("torschuetzenliste").childNodes.length}function getNmbrOfFairPlay(){return document.getElementById("fairplayliste").childNodes.length}function getTeamDataById(a){var b=new Array(0,0,0,0,0,0,0),c=document.getElementsByClassName("toreteam"+a),d,e;for(var f=0;f<c.length;f++)c[f].nextSibling.nextSibling?(d=parseInt(c[f].value),e=parseInt(c[f].nextSibling.nextSibling.value)):(d=parseInt(c[f].value),e=parseInt(c[f].previousSibling.previousSibling.value)),!isNaN(d)&&!isNaN(e)&&(d==e?(b[0]+=1,b[4]++):d>e?(b[0]+=3,b[3]++):b[5]++,b[1]+=d,b[2]+=e,b[6]++);return b}function initTable(){var a=document.getElementById("gametable"),b=getNmbrOfTeams();for(var c=0;c<b;c++){var d=document.createElement("tr");d.id="trteam"+c;var e=document.createElement("td");e.className="tabplatz",e.innerHTML=c+1,d.appendChild(e);var f=document.createElement("td");f.className="tabteamname",d.appendChild(f);var g=document.createElement("td");g.className="tabpunkte",d.appendChild(g);var h=document.createElement("td");h.className="tabspiele",d.appendChild(h);var i=document.createElement("td");i.className="tabwin",d.appendChild(i);var j=document.createElement("td");j.className="tabdraw",d.appendChild(j);var k=document.createElement("td");k.className="tablose",d.appendChild(k);var l=document.createElement("td");l.className="tabtore",d.appendChild(l);var m=document.createElement("td");m.className="tabggt",d.appendChild(m);var n=document.createElement("td");n.className="tabdiff",d.appendChild(n),a.appendChild(d)}updateTables()}function initTorliste(){var a=document.getElementById("bodytorschuetzen");while(a.hasChildNodes())a.removeChild(a.firstChild);var b=getNmbrOfScorers();for(var c=0;c<b;c++){var d=document.createElement("tr");d.id="trtor"+c,c%2===0?d.className="trrow":d.className="trrow2";var e=document.createElement("td");e.className="tabplatz tabtorplatz",e.innerHTML=c+1,d.appendChild(e);var f=document.createElement("td");f.className="tabteamname tabtorteamname",d.appendChild(f);var g=document.createElement("td");g.className="tabtorpunkte",d.appendChild(g),a.appendChild(d)}}function initFairPlay(){var a=document.getElementById("bodyfairplay");while(a.hasChildNodes())a.removeChild(a.firstChild);var b=getNmbrOfFairPlay();for(var c=0;c<b;c++){var d=document.createElement("tr");d.id="trfairplay"+c,c%2===0?d.className="trrow":d.className="trrow2";var e=document.createElement("td");e.className="tabplatz tabfpplatz",e.innerHTML=c+1,d.appendChild(e);var f=document.createElement("td");f.className="tabteamname tabfpteamname",d.appendChild(f);var g=document.createElement("td");g.className="tabfppunkte",d.appendChild(g),a.appendChild(d)}}function updateTables(){var a=document.getElementsByClassName("tabteamname"),b=document.getElementsByClassName("tabpunkte"),c=document.getElementsByClassName("tabspiele"),d=document.getElementsByClassName("tabwin"),e=document.getElementsByClassName("tabdraw"),f=document.getElementsByClassName("tablose"),g=document.getElementsByClassName("tabtore"),h=document.getElementsByClassName("tabggt"),i=document.getElementsByClassName("tabdiff"),j=[],k=[],l=getNmbrOfTeams();for(var m=0;m<l;m++)j[m]=getTeamDataById(m),k[m]=getTeamDataById(m);var n=0;for(var o=0;o<l;o++){for(var p=0;p<l;p++)j[n][0]<j[p][0]?n=p:j[n][0]==j[p][0]&&(j[n][1]-j[n][2]<j[p][1]-j[p][2]?n=p:j[n][1]-j[n][2]==j[p][1]-j[p][2]&&j[n][1]<j[p][1]&&(n=p));j[n][0]=-1,a[o].innerHTML=getTeamNameById(n),c[o].innerHTML=k[n][6],d[o].innerHTML=k[n][3],e[o].innerHTML=k[n][4],f[o].innerHTML=k[n][5],b[o].innerHTML=k[n][0],g[o].innerHTML=k[n][1],h[o].innerHTML=k[n][2],i[o].innerHTML=k[n][1]-k[n][2]}initTorliste();var q=document.getElementById("bodytorschuetzen"),r=document.getElementsByClassName("tabtorteamname"),s=document.getElementsByClassName("tabtorpunkte"),t=getNmbrOfScorers(),u=new Array(t),v=new Array(t),w=new Array(t);for(var x=0;x<t;x++)j[x]=parseInt(document.getElementById("goalsscorer"+x).innerHTML),v[x]=j[x];var y=0;for(var z=0;z<t;z++){for(var A=0;A<t;A++)j[y]<j[A]&&(y=A);j[y]=-1,r[z].innerHTML=getScorerNameById(y)+" ("+getScorerTeamById(y)+")",s[z].innerHTML=v[y]}initFairPlay();var B=document.getElementsByClassName("tabfpteamname"),C=document.getElementsByClassName("tabfppunkte"),D=getNmbrOfFairPlay(),E=new Array(D),F=new Array(D);for(var G=0;G<D;G++)E[G]=parseInt(document.getElementById("gelb"+G).innerHTML)+parseInt(document.getElementById("gelbrot"+G).innerHTML)*2+parseInt(document.getElementById("rot"+G).innerHTML)*5,F[G]=E[G];var H=0;for(var I=0;I<D;I++){for(var J=0;J<D;J++)E[H]<E[J]&&(H=J);E[H]=-1,B[I].innerHTML=getFairPlayNameById(H),C[I].innerHTML=F[H]}}function checkBan(a,b){b=="gelb"&&a.previousSibling.innerHTML%2===0&&(a.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.innerHTML=parseInt(a.nextSibling.nextSibling.nextSibling.nextSibling.nextSibling.innerHTML)+1),b=="gelbrot"&&a.previousSibling.previousSibling.previousSibling.innerHTML%2===0&&(a.nextSibling.nextSibling.nextSibling.innerHTML=parseInt(a.nextSibling.nextSibling.nextSibling.innerHTML)+1),b=="rot"&&(a.nextSibling.innerHTML=parseInt(a.nextSibling.innerHTML)+2)}function pinBans(){}function navigateTo(a){var b=document.getElementsByClassName("navi"),c=b.length;for(var d=0;d<c;d++)b[d].style.display="none";document.getElementById(a).style.display="block"}function save(){document.getElementById("matchNbr").innerHTML=matchNbr,document.getElementById("scorerNbr").innerHTML=scorerNbr,document.getElementById("fairPlayNbr").innerHTML=fairPlayNbr,document.getElementById("teamNbr").innerHTML=teamNbr;var a=document.getElementsByTagName("body")[0].innerHTML;try{localStorage.setItem("backup",a),notification("Sicherung erstellt :)")}catch(b){b==QUOTA_EXCEEDED_ERR&&notification("Kein Speicherplatz im Browser :(")}}function load(){var a=document.getElementsByTagName("body")[0];localStorage.getItem("backup")?(a.innerHTML=localStorage.getItem("backup"),notification("Sicherung erfolgreich wiederhergestellt :)"),clean(),matchNbr=document.getElementById("matchNbr").innerHTML,scorerNbr=document.getElementById("scorerNbr").innerHTML,fairPlayNbr=document.getElementById("fairPlayNbr").innerHTML,teamNbr=document.getElementById("teamNbr").innerHTML,showHide(document.getElementById("navi")),showHide(document.getElementById("loadlink")),document.getElementById("savebutton").style.display="inline-block"):notification("Keine Sicherung vorhanden :(")}function clean(){localStorage.removeItem("backup")}function autoSave(a){var b=setInterval(save,a*60*1e3)}var matchNbr=0,scorerNbr=0,fairPlayNbr=0,teamNbr=0 </script> </head> <body onload="navigateTo('menu');addTeam();addTeam();autoSave(5);" onunload="save();"> <span style="display:none;" id="notification"></span> <div id="navi" style="display:none"> <a href="#" id="navspielpan" onclick="navigateTo('fsspielplan');">Playing schedule</a> <a href="#" id="navstat" onclick="updateTables();navigateTo('fsstat');">Statistics</a> <a href="#" id="navtore" onclick="navigateTo('fstore');">Scorers</a> <a href="#" id="navfairplay" onclick="navigateTo('fsfairplay');">Fair Play</a> <a href="#" id="save" onclick="save()">Save</a> </div> <fieldset class="navi" id="menu"> <a href="#" title="Add team" id="addteam" onclick="addTeam()">Add team</a> <label for="inputrrunde">Rematches: </label> <input type="checkbox" id="inputrrunde" title="Rematches?" checked="checked" /> <label for="input-show-fairplay">Fair Play: </label> <input type="checkbox" id="input-show-fairplay" title="Track red and yellow cards?" checked="checked" onchange="toggleLists();" /> <label for="input-show-scorers">Scorers: </label> <input type="checkbox" id="input-show-scorers" title="Track goal scorers" checked="checked" onchange="toggleLists();" /> <div id="teamliste"></div> <div class="divcontentcenter"> <a href="#" title="Let's go!" id="losbutton" onclick="startTournament()">Let's go!</a> <a href="#" style="display:none" title="Save" id="savebutton" onclick="save()">Save</a> <div id="loadlink" class="textlink" onclick="load();">or load an exisiting tournament</div> </div> </fieldset> <fieldset class="navi" id="fsstat"> <table border="0" id="tabelle"> <thead> <tr> <th class="platz">#</th> <th class="team">Team</th> <th class="punkte">Punkte</th> <th class="spiele">Spiele</th> <th class="win">S</th> <th class="draw">U</th> <th class="lose">N</th> <th class="tore">Tore</th> <th class="ggt">GGT</th> <th class="diff">Diff</th> </tr> </thead> <tbody id="gametable"></tbody> </table> <table border="0" id="torschuetzen"> <thead> <tr> <th class="platz">#</th> <th class="team">Torschütze</th> <th class="punkte">Tore</th> </tr> </thead> <tbody id="bodytorschuetzen"></tbody> </table> <table border="0" id="fairplaytab"> <thead> <tr> <th class="platz">#</th> <th class="team">Unfairster Spieler</th> <th class="punkte">Punkte</th> </tr> </thead> <tbody id="bodyfairplay"></tbody> </table> </fieldset> <fieldset class="navi" id="fsspielplan"> <div id="spielplan"></div> </fieldset> <fieldset class="navi" id="fstore"> <a href="#" title="Add player" id="addteam" onclick="addGoalScorer()">Add scorer</a> <div id="torschuetzenliste"></div> </fieldset> <fieldset class="navi" id="fsfairplay"> <a href="#" title="Add player" id="addteam" onclick="addFairPlay()">Add player</a> <div id="fairplayliste"></div> </fieldset> <div id="savednbrs" style="display:none;"> <span id="matchNbr">0</span> <span id="scorerNbr">0</span> <span id="fairPlayNbr">0</span> <span id="teamNbr">0</span> </div> </body> </html> 